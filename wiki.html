<!DOCTYPE html>
<html>
    <head>
        <!-- basic meta -->
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Horus PHP Framework introduces a micro full-stack cheatsheet framework to scale from small apps, to large without complex code in simple way with small lines of code all of that in just ~1k of lines in one file, if you liked express.js, flask in python, sinatra in ruby, then you will like HPHP The Horus PHP Framework" />
        <meta name="author" content="Mohammed Al Ashaal" />

        <title>Horus Framework, The PHP express web framework</title>

        <!-- CSS -->
        <link href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.0/cosmo/bootstrap.min.css" rel="stylesheet" />
        <link href="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.css" rel="stylesheet" />
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />

        <!-- favicon -->
        <link href="https://scontent-a-mad.xx.fbcdn.net/hphotos-xap1/v/t1.0-9/10500339_421029108048154_5740342647673073365_n.jpg?oh=0166931f250910c2abdbdc602202ac09&oe=54FD00C1" rel="shortcut icon" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <style>
            body
            {
                padding-bottom: 30px;
            }
        </style>

    </head>

    <body>

        <nav class="navbar navbar-default navbar-fixed-bottom one-page-nav" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#intro"><span class="glyphicon glyphicon-fire"></span> Horus Framework</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="fa fa-key"></span> Choose API <span class="caret"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#prototype">&rsaquo; Prototype</a></li>
                                <li><a href="#events">&rsaquo; EventEmitter</a></li>
                                <li><a href="#util">&rsaquo; Util</a></li>
                                <li><a href="#horus">&rsaquo; Horus</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="fa fa-link"></span> Links <span class="caret"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a target="_blank" href="//github.com/alash3al/Horus">&rsaquo; Horus, Github</a></li>
                                <li><a target="_blank" href="//webscripts.softpedia.com/script/Frameworks/Horus-Framework-82303.html">&rsaquo; Horus, Softpedia</a></li>
                                <li><a target="_blank" href="//www.phpclasses.org/package/8642-PHP-Develop-Web-applications-using-a-micro-framework.html">&rsaquo; Horus, PHPClasses</a></li>
                                <li><a target="_blank" href="//facebook.com/horus.framework">&rsaquo; Horus, Facebook</a></li>
                                <li><a target="_blank" href="//packagist.org/packages/alash3al/horus">&rsaquo; Horus, Packagist</a></li>
                                <li><a target="_blank" href="//www.horuslitedev.com">&rsaquo; Horus, Lite Dev</a></li>
                                <li><a target="_blank" href="//fb.me/alash3al">&rsaquo; Horus, Maintainer</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->
            </div>
            <!-- /.container -->
        </nav>

        <div class="container" style="padding-bottom: 90px; max-width: 700px;">

            <!-- Logo -->
            <div class="row text-center center-block" style="margin-top: 20px;">
                <div class="text-center center-block">
                    <img class="img-responsive img-thumbnail" src="https://scontent-b-mad.xx.fbcdn.net/hphotos-xfa1/v/t1.0-9/1507110_421028611381537_23004464390051550_n.png?oh=d3363456912d121175a7e3441e89cee7&oe=55174FBE" />
                </div>
                <br />                
                <div class="text-center center-block">
                    <span><iframe src="http://ghbtns.com/github-btn.html?user=alash3al&repo=Horus&type=watch&count=true" height="30" width="118" frameborder="0" scrolling="0" style="width:118px; height: 30px;" allowTransparency="true"></iframe></span>
                    <span><iframe src="http://ghbtns.com/github-btn.html?user=alash3al&repo=Horus&type=fork&count=true" height="30" width="118" frameborder="0" scrolling="0" style="width:118px; height: 30px;" allowTransparency="true"></iframe></span>
                    <span><iframe src="http://ghbtns.com/github-btn.html?user=alash3al&type=follow&count=true" height="30" width="168" frameborder="0" scrolling="0" style="width:168px; height: 30px;" allowTransparency="true"></iframe></span>
                </div>
            </div>
           <!-- End Logo --> 

            <hr />

            <!-- BODY -->
            <div class="center-block">

                <h1 class="center-block text-center text-muted"><span class="fa fa-fire"></span> Welcome to Horus Framework</h1>

                <blockquote class="well">
                    There is no need to tell you some repeated words as a description, just pick the api you want to understand and see it .
                    Don't forget that PHP itself is a web framework, so there no need to overhead it, and don't forget that a framework isn't just a folders filled up with many and many files that you may not need, you just want a framework that gives you a very flexible code-base that is easy to extend.
                </blockquote>
                <br />

                <div id="prototype">
                    <h1><span class="fa fa-bookmark"></span> Prototype</h1>
                    <p class="well">
                        Prototype is a class that extends PHP's <a target="" href="http://php.net/manual/en/class.arrayobject.php">ArrayObject</a>
                        and adds some features to it, lets see examples:
                    </p>
<pre class="language-php"><code>
    require "Horus.php";

    use \Horus\Prototype;

    // lets use it as a container for our vars
    $my = new Prototype;

    // assign a value to a var
    $my->key1 = "value1";

    // array style
    $my['key2'] = "value2";

    // a closure
    $my->func = function(){
        print "func";
    };

    // call the closure
    $my->func();

    // or
    $my['func']();

    // nested, 'without getting errors'
    $my->x->y->z = "Wow";
    $my->x->y->z->a->b->c->d = array();

    // export ?
    $my->toArray();

    // import ?
    $my->import(array(/*...*/));

    // you can do anything could ArrayObject do

    // lets create a class that extends it
    Class Wow extends Prototype{}
    
    // start it
    $wow = new Wow(array(
        /*
            optional param to import array/object into the wow scope
        */
    ));

    // get wow instance ?
    Wow::instance();

    // and so ...
    $wow->x = "v";
</code></pre>
                </div>

                <hr />

                <div id="events">
                    <h1><span class="fa fa-bookmark"></span> EventEmitter</h1>
                    <p class="well">
                        A class that helps you create an event-driven apps, it is inspired by javascript EventEmitter, it also extends
                        the <a href="#prototype">Prototype</a> Class
                    </p>
<pre class="language-php"><code>
    require "Horus.php";

    use \Horus\EventEmitter;

    // construct
    $e = new EventEmitter;

    // register a new listener
    $e->addListener('event.1', $l1 = function(){
        print "listener.1";
    });

    // you can also use this alias
    $e->on('event.1', function(){
        print "listener.2";
    });

    // you can cancel the next listeners in the event queue
    // just like javascript
    $e->on('event.1', $l2 = function(){
        print "will cancel next";
        return false; //> this is the solution
    });

    // to register a one-time listener
    // there is an argument called $once
    // the third argument will be true
    $e->on('event.1', function(){
        print "listener.3 only-once";
    }, true);

    // or use this
    $e->once('event.1', $l3 = function(){
        print "listener.4 only-once";
    });

    // to emit the event.1 listeners
    $e->emit('event.1');

    // you can also pass arguments
    // as the second the argument
    $e->emit('event.1', "arg1");
    $e->emit('event.1', array("arg1", "arg2"));

    // an example for filters
    $test = "text";

    $e->on('event.2', $l4 = function($text, $last_return){
        // last return is a param that has the value
        // of the last executed listener !
        return "<b>{$text}</b>";
    });

    // arg1: the event-name
    // arg2: the param to pass to the listeners
    // arg3: the default value to return if it were empty
    $text = $e->emit('event.2', $text, $text);

    // remove a registered listener from an event
    $e->removeListener('event.1', $l1);

    // remove all event-listener
    $e->removeAllListeners('event.1');

    // remove all listeners for all events
    $e->removeAllListeners();

    // set the maximum listeners per event
    // default = 0 "unlimited"
    // we will set to "10"
    $e->setMaxListeners(10);

    // get events listeners array
    $e->listeners();

    // get count of listeners in an event
    $e->listenerCount('event.1');
</code></pre>
                </div>

                <hr />

                <div id="util">
                    <h1><span class="fa fa-bookmark"></span> Util</h1>
                    <p class="well">
                        A class that contains some helpers methods specially hashing and encryption, it extends
                        the <a href="#prototype">Prototype</a> Class
                    </p>
<pre class="language-php"><code>
    require "Horus.php";

    use \Horus\Horus;

    $util = new Util;

    // show/hide errors
    // show = true
    // hide = false
    $util->debug(true);

    // making classes in directory
    // be lazy-autoloaded !
    $util->autoload('/packages');

    // encrypt data
    $encrypted = $util->encrypt('my data', 'secret-key');
    // you can change the cipher and the mode
    // cipher: param 3
    // mode: param 4
    $encrypted = $util->encrypt('my data', 'secret-key', MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);

    // decrypt ?
    $util->decrypt($encrypted, 'secret-key');
    // also you can change the cipher and the mode
    // just like the above one 3rd -> cipher and 4th -> mode

    // create a hash using crypt ?
    // maybe just like php 5.5 password hashing api
    $real = "password";
    $hashed = $util->hash($real);
    // change the algorithm from default "blowfish" to md5 ?
    // there are also those algos "sha256, sha512, blowfish, md5"
    $hashed = $util->hash($real, 'md5');

    // check that the hashed password is valid
    $util->verify($real, $hashed);

    // generates a random string
    // with length "15"
    $rand = $util->rand(15);
    // to generate with more special chars
    $rand = $util->rand(15, true);
</code></pre>
                </div>

                <hr />

                <div id="horus">
                    <h1><span class="fa fa-bookmark"></span> Horus</h1>
                    <p class="well">
                        The main class that extends <a href="#events">EventEmitter</a> class
                        which also extends <a href="#prototype">Prototype</a> class .
                    </p>
<pre class="language-php"><code>
    require "Horus.php";

    use \Horus\Horus;

    // This to tell horus the real base domain of your site
    // i'll use localtest.me "a free service"
    // that redirects the whole request to your local machine
    // NOTE: horus will ignore the first 'www'
    $_SERVER['SERVER_NAME'] = 'www.localtest.me';

    // if your site doesn't support url rewrite
    // tell horus to force it
    $_SERVER['HORUS_FORCE_REWRITE'] = true;

    $app = new Horus;
    $req = $app->req; // the Request object
    $res = $app->res; // the Response Object
    $util= $app->util;// the Util object

    // -------------------
    // Request object

    // instead of _GET
    // a wrapper
    // ?k=v
    $req->query->k; //> "v";
    // ?k[k1][k2]=v2
    $req->k->k1->k2; //> "v2"

    // for _POST, PUT, DELETE, or any request body
    // "supports [json, xml and x-www-form-urlencoded]"
    // POST -> x=v&b=c
    $req->body->x; //> v
    // POST -> {"key":"val"}
    $req->body->key; //> val

    // to get a param from the router
    // named params
    // /page/{id}
    $req->params->id;

    // $_COOKIE ?
    // $_COOKIE['key']
    $req->cookies->key;

    // get the current request method
    $req->method;

    // check if the request an ajax request ?
    $req->xhr;

    // check if a request is secure
    // it supports "X-Forwarded-Proto"
    $req->secure;

    // the request protocol "http" or "https"
    $req->protocol;

    // the hostname of the host headers
    // for example.com:8080
    // hostname is example.com
    $req->hostname;

    // the request path "x/y/z?q=v"
    $req->path; //> x/y/z
    
    // the virtual path "PATH_INFO"
    // it is automatically fixed
    $req->vpath;

    // the current route that router use
    // http://site.com/page/5
    // it ignores the first 'www'
    $req->route; //> "//site.com/page/5"

    // Whether _SERVER['HORUS_FORCE_REWRITE'] = true
    $req->forceURW;

    // get the url to the script
    $req->url;

    // get the virtual-url to the script
    $req->vurl; //> it will contains '/index.php/' if $req->forceURW is true

    // get a header field from the client request
    // case in-sensitive
    $req->get('host');
    $req->get('user-agent');

    // ---------------------

    // Response object

    // set a http header [will replace any header with the same field]
    // this is case in-sensitive
    // it return $this, usefull for chaining
    $res->set('content-type', 'text/html');
    // multiple ?
    $res->set(array(
        'x-header-1'    =>  'value',
        'x-header-2'    =>  'value2'
    ));

    // don't want to replace ?
    // just use append
    // also returns $this
    $res->append('x-header3', 'value3');
    $res->append(array(
        /*
            same as set
            array of key value paris
        */
    ));

    // set the status code
    $res->status(404)->set('x-code', '404 not found');

    // write to the client
    $res->send('just a message');
    // or json ?
    // json will also send the content-type: application/json
    $res->send(array(
        'x' => 'y'
    ));

    // json too ..
    // + content-type: application/json
    $res->json(array(
        // ...
    ));

    // jsonp
    // + content-type: application/json
    $res->jsonp(array(
        // ..
    )); //> default jsonp callback is 'callback'

    // change it
    $res->jsonp(array(), 'myfunction');

    // xml
    // + content-type: text/html
    $res->xml(array(
        'book'  =>  array(
            '__attr'=>  array('rel' => 'xxx') //> &lt;book rel="xxx">
            'name'  =>  'test'
            'date'  =>  '12/12/2012'
        )
    ));

    // multiple
    $res->xml(array(
        'title' =>  'test',
        array(
            array(
                'book' => array(
                    'name'  =>  'test-1'
                )
            ),
            array(
                'book' => array(
                    'name' => 'test-2'
                )
            )
        )
    ));

    // you can change the xml version and encoding
    $data = array(/* xml array */);
    $version = "1.0"; // default: 1.0
    $encoding = "UTF-8"; // default utf-8
    $res->xml($data, $version, $encoding);

    // setcookie
    $res->cookie('name', 'value', array(/* options here */));
    /*
        cookie options
        'domain'    =>  empty by default
        'path'      =>  directory of the main index file
        'expires'   =>  zero by default
        'secure'    =>  horus detect it
        'httpOnly'  =>  true by default
    */

    // cache web page for a $ttl
    // cache for 10 seconds
    // using last-modified
    $res->cache(10);

    // cache using expires after 10 seconds from now
    $res->expires(time() + 10);

    // render file ?
    $res->render('filename.html');
    // you can pass vars
    $res->render('filename.html', array('var' => 'c'));
    // you can use multiple files
    $res->render(array(
        'file1.html',
        'file2.html'
    ), array(
        'var1'  =>  'val1'
    ));

    // redirect ? "temporarily"
    $res->redirect('/target.php');

    // redirect ? "permanent"
    $res->redirect("/to.php", true);

    // clear the output
    $res->clear();

    // halt the script, instead of exit & die
    // this is Horus frindly method for halting
    // the response cycle
    $res->halt();

    // or halt and send status code
    $res->halt(404);

    // or send status with message
    $res->halt(404, "we cannot find the requested page");

    // ---------------------

    // Routing

    // router a request
    // 'GET /'
    // arg1: the Request object 'descriped later'
    // arg2: the Response object 'descriped later'
    // arg3: the Horus object
    $app->get('/', function($req, $res, $app){
        print "hello";
    });

    // 'GET /page/5'
    $app->get('/page/{id}', function($req, $res, $app){
        echo $req->params->id; //> 5
    });

    // 'PUT /user/alash3al'
    $app->put('user/{name:[a-z]+}', function($req, $res, $app){
        // this means that horus will only exec this route
        // if the name in range [a-z]
        $res->send($req->params->name);
    });

    // handle multiple methods ?
    $app->post_get_put('/i', function(){/* ... */});

    // handle any request method ?
    $app->all('/a', function(){/* ... */});

    // handle any 'admin/*' path
    $app->all('admin/*', function($req, $res, $app){
        // do an action on all admin pages
        // and also tell horus that there are more
        // routes don't halt after executing this
        // because Horus is a lazy framework
        // that executes only on demand
        // and when it executes, it will halt
        // but somethimes "like this" you need
        // to execute more than just one route
        // so we set wait to true
        // and after executing the next route
        // it will roll-back it to false
        $app->wait = true;
    });

    // Horus using strict matching
    // means it will match from start to end "^...$"
    // sometimes you need to disable this to be "^..." only
    // just set the 3rd param to false
    $app->get('/items/', function(){
        print "items and its sub-paths";
    });

    // group routing ?
    $app->group('/api', function($req, $res, $app){
        'GET /api/add'
        $app->get('/add', function(){
            print "data";
        });
        
        // you can add more routes
        // also you can add more unlimted nested groups !
    });

    // subdomain routing
    // You should set the SERVER_NAME
    // variable before initializing horus
    // as we did in the top
    $app->all('api.localtest.me', function(){
        // this will work on 'http://api.localtest.me/'
        print "api - subdomain";
    });

    // if you need to normalize a custom pattern
    // to horus pattern
    $app->pattern('/my/pattern/'); //> \/\/localtest.me\/my\/pattern\/

    // check if your pattern matches the current route or not
    $pattern = "/test/";
    $strict = true;
    $app->matches($pattern, $strcit);
    // returns object "stdClass"
    // ->ok [true/false]
    // ->params [array of matches]

    // what will happen if horus cannot find any matched route ?
    //> it will show '404 page'
    // 404 page is just a method
    // in the $app object, that you can override
    $app->e404 = function(){
        exit("my custom 404 page");
    };

    // You can filter the output using the 'horus.output' event
    $app->on('horus.output', function($output){
        return strtoupper($output);
    });
</code></pre>
                </div>

                <br />

                <footer class="center-block text-center panel panel-default" style="padding: 15px;">
                    Copyright &copy; 2014 - 2015 &nbsp; HPHP Framework, <br />
                    By <a target="_blank" href="//alash3al.github.io/Me">Mohammed Al Ashaal</a><br />
                </footer>

            </div>
            <!-- BODY -->
        </div>
        <!-- /.container -->

        <!-- JavaScript -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-one-page-nav/3.0.0/jquery.nav.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('[data-toggle="tooltip"').tooltip();
                $('.one-page-nav').onePageNav();
            });
        </script>
    </body>
</html>
